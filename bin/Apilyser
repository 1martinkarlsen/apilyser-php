#!/usr/bin/env php
<?php

use Apilyser\Command\ValidateApiCommand;
use Symfony\Component\Console\Application;

if (Phar::running(false)) {
    require Phar::running(false) . '/vendor/autoload.php';
} else {
    $autoloadPaths = [
        __DIR__ . '/../../../autoload.php', // Project autoloader
        __DIR__ . '/../vendor/autoload.php', // Library autoloader
    ];

    $loaded = false;
    foreach ($autoloadPaths as $file) {
        if (file_exists($file)) {
            require $file;
            $loaded = true;
            break;
        }
    }

    if (!$loaded) {
        die('Autoloader not found');
    }
}

$application = new Application();

$application->add(new ValidateApiCommand());

$application->run();